"use strict";Function.prototype.inherits=function(e){if(e.constructor==Function){var t=function(){};t.prototype=e.prototype,this.prototype=new t,(this.prototype.constructor=this).fn=this.prototype}else this.prototype=e,(this.prototype.constructor=this).fn=this.prototype,this.prototype.parent=e;return this};var General=function(){};function detectIE(){var e=window.navigator.userAgent;if(0<e.indexOf("MSIE "))return"is-ie ie-10";if(0<e.indexOf("Trident/")){e.indexOf("rv:");return"is-ie ie-11"}return 0<e.indexOf("Edge/")&&"is-ie ie-12"}function calculateBar(e,t){var i=e.outerWidth(),a=e.position().left+i/2-t.width()/2;t.css({transform:"translateX("+a+"px)"})}function checkDrag(e,t,i){i.length*i.first().outerWidth()<$(window).width()?(t.addClass("no-drag"),e.kill()):(t.removeClass("no-drag"),e.enable())}General.isNullEmptyUndefined=function(e,t){return null!=t?null==e||null==e||""===e||e===t:null==e||null==e||""===e},General.getScrollBarWidth=function(){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-t},General.waitForFinalEvent=function(){var a={};return function(e,t,i){i||(i="Don't call this twice without a uniqueId"),a[i]&&clearTimeout(a[i]),a[i]=setTimeout(e,t)}}();var LayoutPageBase=function(){this.baseUrl=$("#base-url").val(),this.isMobile="true"==$("#is-mobile").val(),this.mapStyle="mapbox://styles/timboslice/cjr9q67wb1rjg2so1o6tnfv7p",this.splitTextArr=[],this.hasResized=!1,this.scrollOffset=($("#is-mobile").val(),0),this.revealController=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"true"==$("#is-mobile").val()?1:.95}})};LayoutPageBase.prototype={layoutBaseInit:function(){var t=this;console.log("%c Website by lookthinkmake","padding:9px 5px; line-height:25px; background: #3c3c3c; color: #f8ca2b;");var e=detectIE();!1!==e&&$("html").addClass(e),$("body").on("click","#burger",function(e){e.preventDefault(),$("body").toggleClass("nav-open")}),$("body").on("focus","input",function(){$(this).parents().hasClass("animate-label")&&$(this).parents(".animate-label").addClass("blur")}),$("body").on("blur","input",function(){$(this).parents().hasClass("animate-label")&&""==$(this).val()&&$(this).parents(".animate-label").removeClass("blur")}),$(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){if(!1===t.hasResized){for(var e=0;e<t.splitTextArr.length;e++)t.splitTextArr[e].revert();t.has_resized=!0}},150)})},modulesInit:function(){var l=this;$(".module").each(function(){switch($(this).data("type")){case"page-hero-module":break;case"image-text-module":!function(e){var t=new TimelineLite,i=$(e).find(".content-wrapper > *"),a=$(e).find(".img-cover"),o=$(e).find(".img-wrapper img"),n="-100%",s=-8;$(e).hasClass("image-left")&&(n="100%",s=8);$(e).find(".img-wrapper").hasClass("vertical")&&objectFitImages(o);new ScrollMagic.Scene({triggerElement:e,offset:l.scrollOffset,reverse:!1}).on("start",function(e){t.fromTo(a,1,{x:0,ease:Expo.easeOut},{x:n,ease:Expo.easeOut},"+=0"),t.staggerFromTo(i,.5,{opacity:0,x:s,ease:Back.easeOut},{opacity:1,x:0,ease:Back.easeOut},.2,"-=.4")}).addTo(l.revealController)}(this);break;case"text-module":!function(e){var t=new TimelineLite,i=$(e).find(".content-wrapper > *");new ScrollMagic.Scene({triggerElement:e,offset:l.scrollOffset,reverse:!1}).on("start",function(e){t.staggerFromTo(i,.5,{opacity:0},{opacity:1},.075)}).addTo(l.revealController)}(this);break;case"points-of-interest-module":!function(o){var n,t,i=[],r=[];calculateBar($(".category-list li.showing"),$(o).find(".highlight-bar"));$(o).find(".poi-list-wrapper");$(o).find(".poi-list li:not(.extra-spacer)").each(function(){var e=$(this).data("displaycategory"),t=$(this).data("type").replace(/[ &]/g,"-").toLowerCase(),i=$(this).find("h4").text(),a=$(this).find(".address").html(),o=($(this).find(".cta").attr("href"),parseFloat($(this).data("lat"))),n=parseFloat($(this).data("lng")),s={type:"Feature",properties:{name:i,contentArea:'<div class="poi-popup-wrapper flex space-between"><div class="content-wrapper"><h6>'+e+"</h6><h4>"+i+'</h4><p class="text-small">'+a+"</p></div></div>",type:t},geometry:{type:"Point",coordinates:[n,o]}};r.push(s)}),$(o).find(".category-list li").each(function(){if("all"!==$(this).data("category")){var e={type:$(this).data("category").replace(/[ &]/g,"-").toLowerCase()};i.push(e)}}),$.when($.get("https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css",function(e){t=e}),$.getScript("https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js")).then(function(){$("<style />").html(t).appendTo("head"),mapboxgl.accessToken="pk.eyJ1IjoidGltYm9zbGljZSIsImEiOiJjaW4wczdmdWgwYWxvd2tsdW44NGYxMGlrIn0.liwZ5JZ1iBylzGSps950aw",function(a,o,n){a.on("load",function(){a.scrollZoom.disable(),a.addControl(new mapboxgl.NavigationControl);var t=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,offset:[0,-20],anchor:"bottom"});a.addSource("pois",{type:"geojson",data:{type:"FeatureCollection",features:n},cluster:!0}),a.addLayer({id:"clusters",type:"circle",source:"pois",filter:["has","point_count"],paint:{"circle-color":{property:"point_count",type:"interval",stops:[[0,"#BF5700"],[100,"#BF5700"],[750,"#BF5700"]]},"circle-radius":{property:"point_count",type:"interval",stops:[[0,20],[100,30],[750,40]]}}}),a.addLayer({id:"cluster-count",type:"symbol",source:"pois",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-size":12},paint:{"text-color":"#ffffff"}}),n.forEach(function(e){var t="poi-"+e.properties.type.replace(/[ &]/g,"-");a.getLayer(t)||a.addLayer({id:t,type:"symbol",source:"pois",layout:{"icon-image":"marker","icon-size":.5,"icon-allow-overlap":!0,"icon-ignore-placement":!0},filter:["==","type",e.properties.type]})});for(var e=0;e<o.length;e++){var i="poi-"+o[e].type.replace(/[ &]/g,"-");a.on("mouseenter",i,function(e){a.getCanvas().style.cursor="pointer",t.setLngLat(e.features[0].geometry.coordinates).setHTML(e.features[0].properties.contentArea).addTo(a)}),a.on("mouseleave",i,function(){a.getCanvas().style.cursor="",t.remove()}),a.on("click",i,function(e){t.setLngLat(e.features[0].geometry.coordinates).setHTML(e.features[0].properties.contentArea).addTo(a),a.flyTo({center:e.features[0].geometry.coordinates})})}})}(n=new mapboxgl.Map({container:"map",zoom:13,center:[-97.740623,30.281451],style:l.mapStyle,hash:!1}),i,r)}),$(o).on("click",".category-list li",function(){var t=$(this).data("category"),e=($(this).find("h6").text(),$(this).parents(".module").find(".poi-list")),i=[];$(".category-list li").removeClass("showing"),$(this).addClass("showing"),calculateBar($(this),$(o).find(".highlight-bar")),function(t,e,i){new TimelineLite;e="all"==t?e.find("> li").not(".extra-spacer").addClass("show-item").removeClass("hide-item"):e.find("> li").not(".extra-spacer").filter(function(e){$(this).data("type")!=t?$(this).removeClass("show-item").addClass("hide-item").attr("style",""):$(this).addClass("show-item").removeClass("hide-item")});i[0].kill(),i=Draggable.create($(".poi-list-wrapper"),{type:"scrollLeft",edgeResistance:.75,throwProps:!0,lockAxis:!0,zIndexBoost:!1,allowContextMenu:!0})}(t,e,draggable);var t=$(this).data("category").replace(/[ &]/g,"-"),a=new mapboxgl.LngLatBounds;r.forEach(function(e){"all"!=t&&t!=e.properties.type||(a.extend(e.geometry.coordinates),i.push(e))}),n.fitBounds(a,{padding:100}),n.getSource("pois").setData({type:"FeatureCollection",features:i})}),$(o).find(".category-list").scroll(function(){clearTimeout(window.scrollFinished),window.scrollFinished=setTimeout(function(){calculateBar($(".category-list li.showing"),$(o).find(".highlight-bar"))},100)}),$(o).on("click",".poi-list li",function(e){e.preventDefault();var t=[$(this).data("lng"),$(this).data("lat")];n.flyTo({center:t,zoom:18})})}(this);break;case"form-module":!function(e){new TimelineLite,$(e).find(".content-wrapper > *"),$(e).find(".form-wrapper");if($("html").hasClass("is-ie")){var t=$(e).find(".img-wrapper.bg-img img");objectFitImages(t)}}(this)}})}};var DefaultPage=function(){LayoutPageBase.call(this)};DefaultPage.inherits(LayoutPageBase),DefaultPage.fn.init=function(){this.layoutBaseInit(),this.modulesInit()};var ModulePage=function(){LayoutPageBase.call(this)};ModulePage.inherits(LayoutPageBase),ModulePage.fn.init=function(){this.layoutBaseInit(),this.modulesInit()};var BlogPage=function(){LayoutPageBase.call(this)};BlogPage.inherits(LayoutPageBase),BlogPage.fn.init=function(){this.layoutBaseInit(),this.modulesInit()};